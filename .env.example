# ============================================
# RequestRepo Configuration
# ============================================
# Copy this file to .env and customize for your environment
# Frontend variables must be prefixed with VITE_ to be exposed to the browser

# === REQUIRED - Change these! ===
JWT_SECRET=your-super-secret-jwt-key-change-this-min-32-chars
DOMAIN=localhost
SERVER_IP=127.0.0.1

# === Frontend (Vite) - Development Only ===
# These are only used during local development (bun dev / make start-frontend)
# Production builds use runtime detection - no need to set these in Docker
VITE_DOMAIN=localhost
VITE_HTTP_PORT=21337

# === Server Ports ===
HTTP_PORT=80
DNS_PORT=53
SMTP_PORT=25
HTTPS_PORT=443

# === TCP Port Range (for custom TCP listeners) ===
TCP_PORT_RANGE_START=10000
TCP_PORT_RANGE_END=10100

# === Subdomain Configuration ===
SUBDOMAIN_LENGTH=8
SUBDOMAIN_ALPHABET=abcdefghijklmnopqrstuvwxyz0123456789
INCLUDE_SERVER_DOMAIN=true

# === Default DNS TXT Record ===
TXT=Hello!

# === Rate Limiting ===
# Max sessions per IP per time window
SESSION_RATE_LIMIT=10
SESSION_RATE_WINDOW_SECS=60

# === Cache/Memory Configuration ===
# Per-subdomain storage limit (files + DNS records)
MAX_SUBDOMAIN_SIZE_MB=10
# Max HTTP request body size
MAX_REQUEST_BODY_MB=10
# Max cache memory as % of container limit (0.7 = 70%, or use 70)
CACHE_MAX_MEMORY_PCT=70

# === Admin Token (optional) ===
# If set, session creation requires this token via:
# - Request body: {"admin_token": "..."}
# - HTTP-only cookie (set automatically after first successful auth)
# When enabled, users see a password overlay on first visit
# ADMIN_TOKEN=your-admin-token

# === TLS/HTTPS Configuration (optional) ===
TLS_ENABLED=false
CERT_DIR=./certs
# ACME_EMAIL=your-email@example.com
# ACME_DIRECTORY=https://acme-v02.api.letsencrypt.org/directory
# Use staging for testing: https://acme-staging-v02.api.letsencrypt.org/directory
CERT_RENEWAL_DAYS=30
CERT_CHECK_HOURS=12

# === Security ===
# Allow all response headers including dangerous ones like Service-Worker-Allowed
# Default: false (blocked on main domain path-based routing /r/)
ALLOW_ALL_HEADERS=false

# === Error Tracking (Sentry) ===
# SENTRY_DSN_BACKEND=https://xxx@sentry.io/xxx
# SENTRY_DSN_FRONTEND=https://xxx@sentry.io/xxx

# === Logging ===
# Rust log level: trace, debug, info, warn, error
RUST_LOG=info
